---
// Importa el Layout y todos los componentes que vas a usar
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import Intro from '../components/Intro.astro';
import GestionGrid from '../components/GestionGrid.astro';
import SeccionAlcalde from '../components/SeccionAlcalde.astro';
import LogrosComunidad from '../components/LogrosComunidad.astro';
import FormularioOpinion from '../components/FormularioOpinion.astro';

// Importa los datos necesarios
import todosLosProyectos from '../data/proyectos.json';

// La lógica para preparar los datos se queda aquí
const comunidadesUnicas = new Map(
  todosLosProyectos.map(p => [p.comunidad, { id: p.comunidad, nombre: p.nombreComunidad }])
);
const listaComunidades = Array.from(comunidadesUnicas.values());

// Importa las imágenes que se usan directamente en esta página (o en los componentes que no las importan ellos mismos)
import heroImage from '../assets/hero-image.jpg';
import myImage from '../assets/imagen1.jpg';
// ... etc.
---

<Layout title="Vota Gonzalo “Chacho” Diaz">

  <Hero image={heroImage} />

  <Intro image={myImage} />

  <GestionGrid />

  <SeccionAlcalde/>
  
  <LogrosComunidad listaComunidades={listaComunidades}/>

  <FormularioOpinion />

</Layout>